<div class="delete-survey-fullpage-bg">
  <!-- Header -->
  <div class="delete-survey-header">
    <button class="back-dashboard-btn" (click)="goToDashboard()">
      ‚Üê Back to Dashboard
    </button>
    <div class="header-content">
      <h1 class="delete-survey-main-title">Delete Surveys</h1>
      <p class="delete-survey-subtitle">Select a survey to delete</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="delete-survey-container">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>Loading your surveys...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !isLoading" class="error-container">
      <div class="error-icon">‚ö†Ô∏è</div>
      <p class="error-message">{{ error }}</p>
      <button class="retry-btn" (click)="loadSurveys()">Try Again</button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && !error && surveys.length === 0" class="empty-state">
      <div class="empty-icon">üìù</div>
      <h2>No Surveys to Delete</h2>
      <p>You haven't created any surveys yet.</p>
      <button class="create-survey-btn" (click)="goToDashboard()">Go to Dashboard</button>
    </div>

    <!-- Surveys List -->
    <div *ngIf="!isLoading && !error && surveys.length > 0" class="surveys-list">
      <div *ngFor="let survey of surveys; let surveyIndex = index" class="survey-card">
        
        <!-- Question Header with Delete Button -->
        <div class="question-header-row">
          <h2 class="question-text">{{ surveyIndex + 1 }}) {{ survey.surveyQuestionName }}</h2>
          <button class="delete-btn" (click)="openDeleteConfirmation(survey)" title="Delete this survey">
            üóëÔ∏è Delete
          </button>
        </div>

        <!-- Answers Container -->
        <div class="answers-container">
          <div *ngFor="let answer of survey.answer; let answerIndex = index" 
               class="answer-item"
               [class.has-votes]="answer.answerPercentage > 0">
            
            <div class="answer-content">
              <div class="answer-left">
                <span class="answer-letter">{{ getAnswerLetter(answerIndex) }})</span>
                <span class="answer-text">{{ answer.answerName }}</span>
              </div>
              
              <div class="answer-right">
                <span class="answer-percentage">{{ answer.answerPercentage }}%</span>
              </div>
            </div>

            <!-- Progress Bar Background (always visible) -->
            <div class="progress-background">
              <!-- Colored progress bar -->
              <div class="progress-fill" [style.width]="answer.answerPercentage + '%'"></div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Confirmation Dialog -->
  <div *ngIf="showConfirmDialog" class="dialog-overlay" (click)="closeDeleteConfirmation()">
    <div class="dialog-box" (click)="$event.stopPropagation()">
      <div class="dialog-header">
        <h3>‚ö†Ô∏è Confirm Deletion</h3>
      </div>
      <div class="dialog-body">
        <p>Are you sure you want to delete this survey?</p>
        <p class="survey-name-highlight">"{{ surveyToDelete?.surveyQuestionName }}"</p>
        <p class="warning-text">This action cannot be undone!</p>
      </div>
      <div class="dialog-actions">
        <button class="cancel-dialog-btn" (click)="closeDeleteConfirmation()">
          No, Cancel
        </button>
        <button class="confirm-delete-btn" (click)="confirmDelete()">
          Yes, Delete
        </button>
      </div>
    </div>
  </div>
</div>
ğŸ¯ Complete AWS Deployment with Docker - Step by Step
What We're Building:
text

[Your Spring Boot App in Docker] â†’ [AWS Cloud] â†’ [Internet Accessible]

ğŸ“‹ Prerequisites - Before We Start
What You Need:
bash

âœ… AWS Account (with credit card)
âœ… Docker installed on your computer
âœ… Spring Boot app code
âœ… Basic terminal knowledge

ğŸš€ STEP 1: Prepare Your Spring Boot App
1.1 Create a Dockerfile

In your project folder, create a file called Dockerfile (no extension):
dockerfile

# Use Java 25 as base image
FROM openjdk:25

# Copy your JAR file to the container
COPY target/*.jar app.jar

# Expose port 8080 (Spring Boot default)
EXPOSE 8080

# Command to run when container starts
ENTRYPOINT ["java", "-jar", "app.jar"]

1.2 Build Your Spring Boot JAR
bash

# In your project folder
mvn clean package -DskipTests=true

# This creates: target/your-app-0.0.1-SNAPSHOT.jar

1.3 Test Docker Image Locally
bash

# Build Docker image
docker build -t my-spring-app .

# Test it locally
docker run -p 8080:8080 my-spring-app

# Open browser: http://localhost:8080
# If it works, stop with Ctrl+C

ğŸ—ï¸ STEP 2: Setup AWS ECR (Docker Image Storage)
2.1 Create ECR Repository
bash

# Go to AWS Console â†’ ECR (Elastic Container Registry)
# Click "Create repository"
# Name: "my-spring-app"
# Leave other settings default
# Click "Create repository"

2.2 Get ECR Login Command
bash

# Copy this command from ECR console (it looks like):
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 123456789.dkr.ecr.us-east-1.amazonaws.com

2.3 Tag Your Docker Image
bash

# Tag your image for ECR (replace with your actual ECR URL)
docker tag my-spring-app:latest 123456789.dkr.ecr.us-east-1.amazonaws.com/my-spring-app:latest

2.4 Push to ECR
bash

# Push your image to AWS
docker push 123456789.dkr.ecr.us-east-1.amazonaws.com/my-spring-app:latest

âš™ï¸ STEP 3: Create ECS Cluster (Server Group)
3.1 Create Cluster
bash

# Go to AWS Console â†’ ECS (Elastic Container Service)
# Click "Create cluster"
# Cluster name: "my-spring-cluster"
# Infrastructure: AWS Fargate (serverless) - RECOMMENDED
# Click "Create"

ğŸ“ STEP 4: Create Task Definition (App Blueprint)
4.1 Create Task Definition
bash

# In ECS Console â†’ Task Definitions â†’ Create new
# Family: "springboot-task"
# Container: "springboot-container"
# Image URL: Paste your ECR image URL from Step 2
# Port mappings: 8080
# Click "Create"

ğŸš€ STEP 5: Run Your App
5.1 Run Task
bash

# In ECS Console â†’ Clusters â†’ your cluster â†’ Tasks tab
# Click "Run new Task"
# Launch type: FARGATE
# Task definition: Select your task definition
# Cluster: Select your cluster
# Click "Run Task"

5.2 Get Public URL
bash

# Wait for task to change from "PROVISIONING" to "RUNNING"
# Click on the task ID
# Find "Public IP" - this is your app's URL!
# Open: http://YOUR_PUBLIC_IP:8080

ğŸŒ STEP 6: Make It Proper (Load Balancer)
6.1 Create Load Balancer
bash

# Go to EC2 Console â†’ Load Balancers â†’ Create
# Type: Application Load Balancer
# Name: "my-spring-alb"
# Listeners: HTTP:80
# Create

6.2 Create ECS Service
bash

# In ECS â†’ Clusters â†’ your cluster â†’ Services tab
# Click "Create"
# Service: "my-spring-service"
# Task definition: Your task definition
# Load balancer: Select your load balancer
# Click "Create"

6.3 Access Your App
bash

# In EC2 â†’ Load Balancers â†’ Copy DNS Name
# Open: http://your-load-balancer-url.us-east-1.elb.amazonaws.com
# YOUR APP IS NOW LIVE ON INTERNET! ğŸ‰

ğŸ“Š Complete Command Summary:
Build and Push:
bash

# 1. Build JAR
mvn clean package

# 2. Build Docker image
docker build -t my-spring-app .

# 3. Login to ECR
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin YOUR-ECR-URL

# 4. Tag image
docker tag my-spring-app:latest YOUR-ECR-URL/my-spring-app:latest

# 5. Push to ECR
docker push YOUR-ECR-URL/my-spring-app:latest

Deploy:
bash

# 6. Create cluster (AWS Console)
# 7. Create task definition (AWS Console)  
# 8. Run task (AWS Console)
# 9. Create load balancer (AWS Console)
# 10. Create service (AWS Console)

ğŸ’¡ Simple Analogy:
Think of It Like a Restaurant:
bash

ğŸ³ Docker Image = Recipe (your app code)
ğŸ“š ECR = Recipe book storage
ğŸ‘¨â€ğŸ³ ECS Cluster = Kitchen with chefs
ğŸ“‹ Task Definition = Cooking instructions
ğŸ½ï¸ Load Balancer = Host seating customers
ğŸŒ Public URL = Restaurant address

ğŸ› ï¸ Troubleshooting Common Issues:
If App Doesn't Start:
bash

# Check ECS task logs:
1. ECS Console â†’ Tasks â†’ your task
2. Click "Logs" tab
3. See error messages

# Common issues:
- Wrong port in Dockerfile (should be 8080)
- Missing environment variables
- Database connection issues

If Can't Access via URL:
bash

# Check security groups:
1. EC2 Console â†’ Security Groups
2. Find your load balancer security group
3. Add rule: HTTP port 80 from anywhere (0.0.0.0/0)

ğŸ¯ Quick Start - Do This NOW:
Immediate Action Plan:
bash

1. âœ… Create Dockerfile in your project
2. âœ… mvn clean package
3. âœ… docker build -t my-spring-app .
4. âœ… Test locally: docker run -p 8080:8080 my-spring-app
5. â³ Continue with AWS steps when local test works

ğŸ’° Cost Warning:
bash

âš ï¸ ECS Fargate costs money: ~$10-20/month for small app
âš ï¸ Load Balancer costs: ~$16/month
âš ï¸ ECR storage: ~$0.10 per GB per month

ğŸ’° Total: ~$30-40/month for basic setup

Bottom Line:

Follow these steps exactly and you'll have your Spring Boot app running on AWS with Docker! Start with Step 1 (Dockerfile) and test locally first.

Ready to create your Dockerfile and test locally? This is the safest first step! ğŸ³
